package veritas.script;

import org.json.JSONArray;
import org.json.JSONObject;

import common.RestUtil;
import common.SSLUtilities;

public class DeactivateInvoices {
	
	private static String invoiceStatusUpdateURL = "https://veritasmongoservices.veritas.pcf.dell.com/api/service/update_status?";

	private static String getInvoiceDataURL_prod = "https://veritasmongoservices.veritas.pcf.dell.com/api/service/getPOARDataE?";

	
//	private static String deliverToCCETriggerEvent_sit = "https://veritasbacksit.ausvdc02.pcf.dell.com/DeliverToCCETriggerEvent";
//	private static String deliverToCCETriggerEvent_prod = "https://veritasback.ausmpc.pcf.dell.com/DeliverToCCETriggerEvent";

	
	
		
		
	private static RestUtil restutil = new RestUtil();
	public static void main(String[] args) {
		SSLUtilities.trustAllHostnames();
		SSLUtilities.trustAllHttpsCertificates();
		String dataPOnumberInvoicenum = "[\r\n" + 
				"[\"149341368\",\"10716279195\"],[\"151335585\",\"10723054535\"],[\"181927\",\"10722814753\"],[\"151605222\",\"10723660957\"],[\"151439803\",\"10723008089\"],[\"148651\",\"10723368651\"],[\"149341368\",\"10722183170\"],[\"151593466\",\"10723654063\"],[\"151593466\",\"10723654071\"],[\"151593466\",\"10723839249\"],[\"182466\",\"10723597040\"],[\"151471440\",\"10723073616\"],[\"151471440\",\"10723073608\"],[\"151340005\",\"10722435223\"],[\"151605222\",\"10723669165\"],[\"148651\",\"10723363165\"],[\"151931382\",\"10725821990\"],[\"149014\",\"10727908764\"],[\"149013\",\"10727908756\"],[\"151829980\",\"10724962850\"],[\"151990063\",\"10725630005\"],[\"152426261\",\"10728522897\"],[\"152426261\",\"10728522889\"],[\"152426261\",\"10728522900\"],[\"149123\",\"10728538504\"],[\"152448444\",\"10728120114\"],[\"152103634\",\"10727569411\"],[\"152505677\",\"10728362896\"],[\"152011625\",\"10725922602\"],[\"152011625\",\"10725922590\"],[\"149341368\",\"10728419297\"],[\"152173200\",\"10727202226\"],[\"152286901\",\"10727223672\"],[\"152243636\",\"10726967697\"],[\"182753\",\"10724446380\"],[\"151831046\",\"10725182804\"],[\"151882095\",\"10725182812\"],[\"151758589\",\"10724463040\"],[\"151725776\",\"10725486143\"],[\"152419313\",\"10727899818\"],[\"152426261\",\"10727899826\"],[\"151924715\",\"10725380508\"],[\"151931382\",\"10725380516\"],[\"148934\",\"10726674802\"],[\"151882095\",\"10725131638\"],[\"152231392\",\"10726895556\"],[\"182849\",\"10724944191\"],[\"151831046\",\"10724962868\"],[\"182726\",\"10724962171\"],[\"151758589\",\"10724401820\"],[\"UCDAB633069\",\"10725418442\"],[\"151906811\",\"10725592448\"],[\"151662035\",\"10724422125\"],[\"152231392\",\"10726918364\"],[\"152231392\",\"10726918356\"],[\"149012\",\"10727698125\"],[\"152426261\",\"10728028654\"],[\"151725776\",\"10725486186\"],[\"151725776\",\"10725486160\"],[\"151725776\",\"10725486151\"],[\"151725776\",\"10725486135\"],[\"151725776\",\"10725486178\"],[\"151960493\",\"10725573340\"],[\"151931382\",\"10725990389\"],[\"149276\",\"10731639045\"],[\"152894636\",\"10730271284\"],[\"184330\",\"10729634432\"],[\"152666527\",\"10729231531\"],[\"152788776\",\"10729747712\"],[\"184330\",\"10729460967\"],[\"149276\",\"10730724502\"],[\"152711024\",\"10729387592\"],[\"152692653\",\"10729400135\"],[\"149276\",\"10730083356\"],[\"152894636\",\"10730099575\"],[\"152951396\",\"10730652201\"],[\"152477343\",\"10728718578\"],[\"153380601\",\"10732682343\"],[\"152951396\",\"10730652180\"],[\"153241436\",\"10732105287\"],[\"153052481\",\"10731127401\"],[\"152956350\",\"10730652210\"],[\"152956350\",\"10730652228\"],[\"184083\",\"10729246570\"],[\"153380601\",\"10732682335\"],[\"153101462\",\"10731252176\"],[\"149276\",\"10730123094\"],[\"152894636\",\"10730111236\"],[\"153182923\",\"10731852825\"],[\"152788776\",\"10729789229\"],[\"184495\",\"10729879147\"],[\"153182923\",\"10731678324\"],[\"UCDAB633069\",\"10731629894\"],[\"153101462\",\"10732479439\"],[\"152956350\",\"10731937090\"],[\"153182923\",\"10732918256\"],[\"152692653\",\"10729315210\"],[\"193057\",\"10729737330\"],[\"152692653\",\"10729294283\"],[\"149276\",\"10729619350\"],[\"152666527\",\"10729176147\"],[\"152602721\",\"10728951958\"],[\"153953265\",\"10735934992\"],[\"153954209\",\"10735935006\"],[\"149341368\",\"10734582814\"],[\"153450949\",\"10733292649\"],[\"154179265\",\"10736806420\"],[\"150062\",\"10736823852\"],[\"153947229\",\"10736351945\"],[\"154137668\",\"10736566563\"],[\"184922\",\"10732777491\"],[\"184922\",\"10733487624\"],[\"153957387\",\"10735673945\"],[\"153948062\",\"10735673929\"],[\"154241128\",\"10737043866\"],[\"154189866\",\"10736785072\"],[\"154137668\",\"10736806367\"],[\"153571136\",\"10733901460\"],[\"153895880\",\"10735368125\"],[\"153579314\",\"10733851420\"],[\"154245987\",\"10737285120\"],[\"186320\",\"10736954670\"],[\"153895880\",\"10735373491\"],[\"154137668\",\"10736579631\"],[\"154267489\",\"10737115665\"],[\"184922\",\"10732737714\"],[\"184922\",\"10732737693\"],[\"153952664\",\"10735664349\"],[\"154189866\",\"10737306790\"],[\"154241281\",\"10737272255\"],[\"153571136\",\"10733829508\"],[\"153474334\",\"10733292690\"],[\"153895880\",\"10735496053\"],[\"153548858\",\"10735735830\"],[\"153957387\",\"10735766920\"],[\"153571136\",\"10734238276\"],[\"185799\",\"10735044911\"],[\"153975171\",\"10735935065\"],[\"153953265\",\"10736379568\"],[\"153506069\",\"10733431228\"],[\"150094\",\"10737200601\"],[\"184922\",\"10732630105\"],[\"184922\",\"10732737706\"],[\"184922\",\"10732739908\"],[\"184922\",\"10732777790\"],[\"153895880\",\"10735368133\"],[\"153474742\",\"10733228399\"],[\"153957387\",\"10735738390\"],[\"153865551\",\"10735373483\"],[\"153947229\",\"10735816741\"],[\"150221\",\"10738867477\"],[\"150341\",\"10739565229\"],[\"150319\",\"10739521641\"]\r\n" + 
				"]\r\n" + 
				"";
		
		dataPOnumberInvoicenum = "[[\"149341368\",\"10716279195\"],[\"151335585\",\"10723054535\"],[\"181927\",\"10722814753\"],[\"151605222\",\"10723660957\"],[\"151439803\",\"10723008089\"],[\"148651\",\"10723368651\"],[\"149341368\",\"10722183170\"],[\"151593466\",\"10723654063\"],[\"151593466\",\"10723654071\"],[\"151593466\",\"10723839249\"],[\"182466\",\"10723597040\"],[\"151471440\",\"10723073616\"],[\"151471440\",\"10723073608\"],[\"151340005\",\"10722435223\"],[\"151605222\",\"10723669165\"],[\"148651\",\"10723363165\"],[\"151931382\",\"10725821990\"],[\"149014\",\"10727908764\"],[\"149013\",\"10727908756\"],[\"151829980\",\"10724962850\"],[\"151990063\",\"10725630005\"],[\"152426261\",\"10728522897\"],[\"152426261\",\"10728522889\"],[\"152426261\",\"10728522900\"],[\"149123\",\"10728538504\"],[\"152448444\",\"10728120114\"],[\"152103634\",\"10727569411\"],[\"152505677\",\"10728362896\"],[\"152011625\",\"10725922602\"],[\"152011625\",\"10725922590\"],[\"149341368\",\"10728419297\"],[\"152173200\",\"10727202226\"],[\"152286901\",\"10727223672\"],[\"152243636\",\"10726967697\"],[\"182753\",\"10724446380\"],[\"151831046\",\"10725182804\"],[\"151882095\",\"10725182812\"],[\"151758589\",\"10724463040\"],[\"151725776\",\"10725486143\"],[\"152419313\",\"10727899818\"],[\"152426261\",\"10727899826\"],[\"151924715\",\"10725380508\"],[\"151931382\",\"10725380516\"],[\"148934\",\"10726674802\"],[\"151882095\",\"10725131638\"],[\"152231392\",\"10726895556\"],[\"182849\",\"10724944191\"],[\"151831046\",\"10724962868\"],[\"182726\",\"10724962171\"],[\"151758589\",\"10724401820\"],[\"UCDAB633069\",\"10725418442\"],[\"151906811\",\"10725592448\"],[\"151662035\",\"10724422125\"],[\"152231392\",\"10726918364\"],[\"152231392\",\"10726918356\"],[\"149012\",\"10727698125\"],[\"152426261\",\"10728028654\"],[\"151725776\",\"10725486186\"],[\"151725776\",\"10725486160\"],[\"151725776\",\"10725486151\"],[\"151725776\",\"10725486135\"],[\"151725776\",\"10725486178\"],[\"151960493\",\"10725573340\"],[\"151931382\",\"10725990389\"],[\"149276\",\"10731639045\"],[\"152894636\",\"10730271284\"],[\"184330\",\"10729634432\"],[\"152666527\",\"10729231531\"],[\"152788776\",\"10729747712\"],[\"184330\",\"10729460967\"],[\"149276\",\"10730724502\"],[\"152711024\",\"10729387592\"],[\"152692653\",\"10729400135\"],[\"149276\",\"10730083356\"],[\"152894636\",\"10730099575\"],[\"152951396\",\"10730652201\"],[\"152477343\",\"10728718578\"],[\"153380601\",\"10732682343\"],[\"152951396\",\"10730652180\"],[\"153241436\",\"10732105287\"],[\"153052481\",\"10731127401\"],[\"152956350\",\"10730652210\"],[\"152956350\",\"10730652228\"],[\"184083\",\"10729246570\"],[\"153380601\",\"10732682335\"],[\"153101462\",\"10731252176\"],[\"149276\",\"10730123094\"],[\"152894636\",\"10730111236\"],[\"153182923\",\"10731852825\"],[\"152788776\",\"10729789229\"],[\"184495\",\"10729879147\"],[\"153182923\",\"10731678324\"],[\"UCDAB633069\",\"10731629894\"],[\"153101462\",\"10732479439\"],[\"152956350\",\"10731937090\"],[\"153182923\",\"10732918256\"],[\"152692653\",\"10729315210\"],[\"193057\",\"10729737330\"],[\"152692653\",\"10729294283\"],[\"149276\",\"10729619350\"],[\"152666527\",\"10729176147\"],[\"152602721\",\"10728951958\"],[\"153953265\",\"10735934992\"],[\"153954209\",\"10735935006\"],[\"149341368\",\"10734582814\"],[\"153450949\",\"10733292649\"],[\"154179265\",\"10736806420\"],[\"150062\",\"10736823852\"],[\"153947229\",\"10736351945\"],[\"154137668\",\"10736566563\"],[\"184922\",\"10732777491\"],[\"184922\",\"10733487624\"],[\"153957387\",\"10735673945\"],[\"153948062\",\"10735673929\"],[\"154241128\",\"10737043866\"],[\"154189866\",\"10736785072\"],[\"154137668\",\"10736806367\"],[\"153571136\",\"10733901460\"],[\"153895880\",\"10735368125\"],[\"153579314\",\"10733851420\"],[\"154245987\",\"10737285120\"],[\"186320\",\"10736954670\"],[\"153895880\",\"10735373491\"],[\"154137668\",\"10736579631\"],[\"154267489\",\"10737115665\"],[\"184922\",\"10732737714\"],[\"184922\",\"10732737693\"],[\"153952664\",\"10735664349\"],[\"154189866\",\"10737306790\"],[\"154241281\",\"10737272255\"],[\"153571136\",\"10733829508\"],[\"153474334\",\"10733292690\"],[\"153895880\",\"10735496053\"],[\"153548858\",\"10735735830\"],[\"153957387\",\"10735766920\"],[\"153571136\",\"10734238276\"],[\"185799\",\"10735044911\"],[\"153975171\",\"10735935065\"],[\"153953265\",\"10736379568\"],[\"153506069\",\"10733431228\"],[\"150094\",\"10737200601\"],[\"184922\",\"10732630105\"],[\"184922\",\"10732737706\"],[\"184922\",\"10732739908\"],[\"184922\",\"10732777790\"],[\"153895880\",\"10735368133\"],[\"153474742\",\"10733228399\"],[\"153957387\",\"10735738390\"],[\"153865551\",\"10735373483\"],[\"153947229\",\"10735816741\"],[\"150221\",\"10738867477\"],[\"150341\",\"10739565229\"],[\"150319\",\"10739521641\"]]\r\n"
				+ "";
	
		JSONArray dataJson = new JSONArray(dataPOnumberInvoicenum);
		restutil.VERITAS_INTERNAL_AUTH_KEY = "D8D2AD87-3329-4D80-8EC7-84E112A48785";
		for(int i=0;i<dataJson.length();i++) {
//			System.out.println(dataJson.getJSONArray(i));
			String ponum = dataJson.getJSONArray(i).getString(0);
			String invnum = dataJson.getJSONArray(i).getString(1);
			
			try {
				JSONObject inv_data = new JSONObject(restutil.sendGetRequest(getInvoiceDataURL_prod + "PONumber="+ponum+"&INV_Number="+invnum));
//				System.out.println(inv_data);
				String dpid = inv_data.getString("DPID");
				String InvoiceStatus = inv_data.getString("Status");
				System.out.println(dpid + " -- InvoiceStatus : " + InvoiceStatus + ", ponum : " + ponum);
				System.out.println(dpid);
				String request = "{\"PONumber\":\""+ponum+"\",\"DPID\":\""+dpid+"\",\"InvoiceNumber\":\""+invnum+"\","
						+ "\"POStatus\":\"In Process\",\"POReason\":\"Null\",\"InvoiceStatus\":\"Deactive\","
						+ "\"InvoiceReason\":\"Transaction is Deactivated\",\"LastModifiedBy\":\"sasanka_talukder\","
						+ "\"LastModifiedDate\":\"2024-04-05 20:12:24\"}\r\n" + 
						"";
				
				if(!"Deactive".contentEquals(InvoiceStatus)) {
					String respDelcce = restutil.sendPostRequest(invoiceStatusUpdateURL, request);
					System.out.println(i + "----"+invnum+" -->  " +  respDelcce);
				}

			} catch (Exception e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
				System.out.println("ohhhooo Exception ::: " + i + " ---- "+invnum+" -->  " +  ponum);
			}
			
		}
	}
}
