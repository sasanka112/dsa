package veritas.script.otherstream;

import org.json.JSONArray;
import org.json.JSONObject;

import common.RestUtil;
import common.SSLUtilities;

public class CheckCCEStatusInvoices {
	
	private static String getCCEDataURL = "https://cce-services.us.dell.com/cce-ccs/cforequest/cce-requests/search/";
	
	private static RestUtil restutil = new RestUtil();
	public static void main(String[] args) {
		SSLUtilities.trustAllHostnames();
		SSLUtilities.trustAllHttpsCertificates();
		String dataPOnumberInvoicenum = "[[\"UTTYL.0000038458\",\"10686326214\"], [\"V000161003\",\"10676350703\"], [\"UTH174853\",\"10684811323\"], [\"UTH173943\",\"10684731563\"], [\"UTH173712\",\"10684731547\"], [\"UTP174078\",\"10684619512\"], [\"S378586\",\"10684674508\"]]";
		dataPOnumberInvoicenum = "[[\"P10005669489\",\"10763549056\"], [\"504543353\",\"10763538091\"], [\"70830989\",\"10763536949\"], [\"17379176\",\"10763742929\"], [\"BKF2727\",\"10763850632\"], [\"49-KHG12-P\",\"10763851160\"], [\"504718944\",\"10763844208\"], [\"35296866\",\"10763825215\"], [\"17375943\",\"10763850296\"], [\"BJA1763\",\"10763849753\"], [\"2810582\",\"10763850958\"], [\"35410019\",\"10764099335\"], [\"35410019\",\"10764103369\"], [\"5070564\",\"1018344675\"], [\"35410011\",\"10764105691\"], [\"35410011\",\"10764099052\"], [\"68540557\",\"10764149121\"], [\"35403204\",\"10764192043\"], [\"35410026\",\"10764452870\"], [\"35424150\",\"10764434655\"], [\"68540554\",\"10764449909\"], [\"103302906927\",\"10764451489\"], [\"BKB9432\",\"10764504308\"], [\"103302906661\",\"10764282279\"], [\"17393341\",\"10764568820\"], [\"17393257\",\"10764567367\"], [\"17390412\",\"10764514351\"], [\"35416820\",\"10764587186\"], [\"35426767\",\"10764587610\"], [\"35426786\",\"10764587581\"], [\"17390826\",\"10764566987\"], [\"49-KHR65-P\",\"10764569868\"], [\"17391735\",\"10764474875\"], [\"5069373\",\"1018345988\"], [\"35416823\",\"10764484819\"], [\"35416822\",\"10764522419\"], [\"35416822\",\"10764524194\"], [\"35416820\",\"10764587178\"], [\"35422518\",\"10764490282\"], [\"5070565\",\"1018347134\"], [\"35410024\",\"10764586510\"], [\"5070566\",\"1018347046\"], [\"5070566\",\"1018346503\"], [\"5070565\",\"1018347031\"], [\"35416821\",\"10764478769\"], [\"5070566\",\"1018346994\"], [\"5070564\",\"1018346914\"], [\"5070564\",\"1018345822\"], [\"35416822\",\"10764474429\"], [\"5071201\",\"1018346746\"], [\"5070566\",\"1018346926\"], [\"5070564\",\"1018346300\"], [\"5070566\",\"1018346326\"], [\"5070564\",\"1018345835\"], [\"70-TAL98-S\",\"10764477959\"], [\"10-DVJ14-S\",\"10764569390\"], [\"5070564\",\"1018346564\"], [\"5070564\",\"1018346526\"], [\"5070566\",\"1018346324\"], [\"35410014\",\"10764521596\"], [\"35410018\",\"10764521844\"], [\"5070566\",\"1018346236\"], [\"5070564\",\"1018346562\"], [\"5070566\",\"1018346196\"], [\"5070566\",\"1018346133\"], [\"5070564\",\"1018347148\"], [\"5070565\",\"1018346348\"], [\"5070564\",\"1018346878\"], [\"35410018\",\"10764521684\"], [\"35411392\",\"10764583487\"], [\"504542928\",\"10764579238\"], [\"5070564\",\"1018346792\"], [\"5070564\",\"1018346037\"], [\"5070564\",\"1018346797\"], [\"5070564\",\"1018346010\"], [\"BKW8208\",\"10764570253\"], [\"BJR9067\",\"10764567746\"], [\"5070564\",\"1018346854\"], [\"35410016\",\"10764526476\"], [\"5070564\",\"1018346928\"], [\"5070501\",\"1018347603\"], [\"5072143\",\"1018347990\"], [\"504765660\",\"1018347605\"], [\"49-95481-P\",\"10764681526\"], [\"P25420413\",\"10764792145\"], [\"504761663\",\"1018347604\"], [\"5071302\",\"1018347768\"], [\"35416820\",\"10764840207\"], [\"35416820\",\"10764792217\"], [\"5065400\",\"1018347719\"], [\"504759351\",\"1018347856\"], [\"10-DU187-S\",\"10764571709\"], [\"BJT8468\",\"10764681489\"], [\"BJZ4815\",\"10764679175\"], [\"504728932\",\"1018347600\"], [\"35403604\",\"10764679520\"], [\"35416820\",\"10764792209\"], [\"BKB2141\",\"10764681446\"], [\"5070565\",\"1018347352\"], [\"2277500L\",\"10764588631\"], [\"68605621\",\"10764681470\"], [\"504729053\",\"1018347851\"], [\"504758594\",\"1018347602\"], [\"BKB5611\",\"10764681454\"], [\"35409102\",\"10764679597\"], [\"504742280\",\"10764681518\"], [\"35416823\",\"10764792196\"], [\"504742278\",\"10764681500\"], [\"103302904271\",\"10764701867\"], [\"35410024\",\"10764772764\"], [\"17401479\",\"10765082661\"], [\"P25423479\",\"10765358006\"]]";
		
		JSONArray dataJson = new JSONArray(dataPOnumberInvoicenum);
		new CheckCCEStatusInvoices().correctSoldTo(dataJson);
	}
	
	public void correctSoldTo(JSONArray dataJson) {
		JSONArray dataJsonRetrigger = new JSONArray(); 
		for(int i=0;i<dataJson.length();i++) {
			String ponum = dataJson.getJSONArray(i).getString(0);
			String invnum = dataJson.getJSONArray(i).getString(1);
			System.out.println(i + " ----> "+ invnum + "-" + ponum);
			
			try {
				JSONArray cfo_all_data = new JSONArray(restutil.sendGetRequest(getCCEDataURL + "docnumber="+invnum + "-" + ponum));
				
				JSONObject cfo_data;
				if(cfo_all_data.length() > 0) {
					for(int j=0;j<cfo_all_data.length();j++) {
						cfo_data = cfo_all_data.getJSONObject(j);
						String statusDesc = cfo_data.getJSONObject("statusCode").getString("statusDesc");
						String statusDescExternal = cfo_data.getJSONObject("statusCode").getString("statusDescExternal");
						System.out.println(statusDesc + "--" + statusDescExternal + " <-- " + cfo_data.getString("createdDate"));
					}
				}
				else {
					System.out.println("no data present -> " + i + "----"+invnum+" --- "+ ponum +" -->  ");
				}
				
				
			} catch (Exception e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
			}
			
		}
		System.out.println(dataJsonRetrigger);
	}
}
